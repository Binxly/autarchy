#!/bin/bash

if [ "$(uname -r | sed 's/-arch/\.arch/')" != "$(pacman -Q linux | awk '{print $2}')" ]; then
  gum confirm "New Linux kernel requires reboot. Ready?" && autarchy-state clear re*-required && sudo reboot now
elif [ -f "$HOME/.local/state/autarchy/reboot-required" ]; then
  gum confirm "Updates require reboot. Ready?" && autarchy-state clear re*-required && sudo reboot now
elif [ -f "$HOME/.local/state/autarchy/relaunch-required" ]; then
  gum confirm "Updates require Hyprland relaunch. Ready?" && autarchy-state clear relaunch-required && uwsm stop
fi
